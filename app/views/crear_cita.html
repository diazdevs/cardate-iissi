{% extends 'base/base.html' %}

{% block title %}Crear cita{% endblock title %}

{% block content %}
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Nuevo vehiculo</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="form-group">
                        <label for="recipient-name" class="col-form-label">Matricula:</label>
                        <input type="text" class="form-control" placeholder="3123ASD" id="recipient-name">
                    </div>
                    <div class="form-group">
                        <label for="recipient-name" class="col-form-label">Marca:</label>
                        <select name="users" class="form-control" onchange="showUser(this.value)">
                            <option>Elige una marca:</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="recipient-name" class="col-form-label">Modelo:</label>
                        <select name="users" class="form-control" onchange="showUser(this.value)">
                            <option>Elige una modelo:</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="recipient-name" class="col-form-label">Version:</label>
                        <select name="users" class="form-control" onchange="showUser(this.value)">
                            <option>Elige una version:</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Crear</button>
            </div>
        </div>
    </div>
</div>

<main role="main">
    <div class="container mt-3">

        <h3>Crear cita cliente</h3>


        {% if errores %}
        <div class="alert alert-danger" role="alert">
            <ul>
                {% for error in errores %}
                <li>{{ error }}</li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}
        <form action="/citas/crear" method='post'>
            <input type="hidden" name="token" value="{{ token }}">
            <div class="form-group">
                <label class="col-form-label" for="">Vehiculo <a href="#" data-toggle="modal"
                        data-target="#exampleModal" data-whatever="@mdo">+
                        Nuevo</a> <a href="/vehiculos/crear">Crear vehiculo</a></label>

                <select name="id_vehiculo" class="form-control" id="">
                    <option>Seleccionar vehiculo</option>
                    {% for vehiculo in vehiculos %}
                    <option value="{{ vehiculo.id }}">{{ vehiculo.matricula }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group">
                <label class="col-form-label" for="">Motivo</label>
                <select name="motivo" class="form-control" id="">
                    <option value="reparacion">Reparacion</option>
                    <option value="cambio pieza">Cambio pieza</option>
                    <option value="capa pintura">Capa Pintura</option>
                    <option value="revision">Revision</option>
                </select>
            </div>

            <div class="form-group">
                <label class="col-form-label" for="">Descripcion motivo</label>
                <textarea name="descripcion_motivo" id="" cols="30" rows="10" class="form-control"></textarea>
            </div>

            <h1>Selecciona fecha</h1>

            <table class="table table-bordered tabla-horarios">
                <thead>
                    <tr>
                        <th>27/05/2019</th>
                        <th>28/05/2019</th>
                        <th>29/05/2019</th>
                        <th>30/05/2019</th>
                        <th>31/05/2019</th>

                    </tr>
                </thead>
                <tbody>
                <tbody>
                    <tr>
                        <td class="hora-cita" data-hora="08:00">08:00</td>
                        <td class="reservado">Reservado</td>
                        <td class="hora-cita" data-hora="08:00">08:00</td>
                        <td class="hora-cita" data-hora="08:00">08:00</td>
                        <td class="hora-cita" data-hora="08:00">08:00</td>
                    </tr>
                    <tr>
                        <td class="hora-cita" data-hora="09:00">09:00</td>
                        <td class="hora-cita" data-hora="09:00">09:00</td>
                        <td class="hora-cita" data-hora="09:00">09:00</td>
                        <td class="hora-cita" data-hora="09:00">09:00</td>
                        <td class="hora-cita" data-hora="09:00">09:00</td>
                    </tr>
                    <tr>
                        <td class="hora-cita" data-hora="10:00">10:00</td>
                        <td class="hora-cita" data-hora="10:00">10:00</td>
                        <td class="hora-cita" data-hora="10:00">10:00</td>
                        <td class="hora-cita" data-hora="10:00">10:00</td>
                        <td class="hora-cita" data-hora="10:00">10:00</td>
                    </tr>
                    <tr>
                        <td class="hora-cita" data-hora="11:00">11:00</td>
                        <td class="hora-cita" data-hora="11:00">11:00</td>
                        <td class="hora-cita" data-hora="11:00">11:00</td>
                        <td class="hora-cita" data-hora="11:00">11:00</td>
                        <td class="hora-cita" data-hora="11:00">11:00</td>
                    </tr>
                </tbody>
                </tbody>
            </table>
            <div class="form-group">
                <div class="row">
                    <div class="col-md-6">
                        <label class="col-form-label" for="">Hora Inicio</label>
                        <input type="datetime-local" name="hora_inicio" class="form-control" step="1">
                    </div>
                    <div class="col-md-6">
                        <label class="col-form-label" for="">Hora Fin</label>
                        <input type="datetime-local" name="hora_fin" class="form-control" step="1">
                    </div>

                </div>
            </div>



            <hr>
            <button type="submit" class="btn btn-primary">Crear cita</button>
        </form>
    </div>
</main>
{% endblock content %}


{% block javascript %}

{{ parent() }}

<script>
    $(".hora-cita").on("click", function(){
        $(this).html("Seleccionado");
        $(this).addClass("selected");

        $(".hora-cita").filter(x => !x.hasClass("selected")).each(x=> x.html(x.data("hora")));
        $(".hora-cita").filter(x => !x.hasClass("selected")).each(x=> x.removeClass("selected"));
    })
</script>


{% endblock %}